<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>P & D Essentials</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f4f6f9; }
    .hero { background: linear-gradient(to right, #06beb6, #48b1bf); color: white; padding: 60px 20px; text-align: center; }
    .product-card { border: 1px solid #ddd; border-radius: 8px; padding: 10px; background: white; margin-bottom: 20px; }
    .cart { position: fixed; top: 10px; right: 10px; background: white; padding: 10px; border: 1px solid #ccc; border-radius: 8px; z-index: 1000; }
    footer { background: #e9ecef; text-align: center; padding: 20px 10px; margin-top: 40px; }
  </style>
</head>
<body>

  <div class="hero">
    <h1>P & D Essentials</h1>
    <p>Your one-stop shop for everyday essentials</p>
  </div>

  <div class="container mt-4">
    <h3>Our Products</h3>
    <div class="row" id="product-list"></div>
  </div>

  <div class="cart">
    <h6>ðŸ›’ Cart: <span id="cart-count">0</span></h6>
    <ul id="cart-items" style="list-style:none; padding:0;"></ul>
    <form action="https://formspree.io/f/mkgrnlww" method="POST" id="order-form">
      <input type="hidden" name="order" id="order-data" />
      <input type="text" name="name" placeholder="Your Name" class="form-control mb-2" required />
      <input type="email" name="email" placeholder="Your Email" class="form-control mb-2" required />
      <button type="submit" class="btn btn-success w-100">Place Order</button>
    </form>
  </div>

  <div class="container mt-5">
    <h4>About Us</h4>
    <p>P & D Essentials offers quality, everyday essentials at affordable prices. We focus on convenience, reliability, and style.</p>

    <h4>Contact Us</h4>
    <form action="https://formspree.io/f/mkgrnlww" method="POST">
      <input type="text" name="name" placeholder="Your Name" class="form-control mb-2" required />
      <input type="email" name="email" placeholder="Your Email" class="form-control mb-2" required />
      <textarea name="message" placeholder="Your Message" class="form-control mb-2" required></textarea>
      <button type="submit" class="btn btn-primary">Send Message</button>
    </form>
  </div>

  <footer>
    <p>Â© 2025 P & D Essentials. All rights reserved.</p>
  </footer>

  <script>
    const sheetID = '1B8Ayk10CEHeDZew3Fl7MyyJXDhHHvj4V-VqEKqTA2E8';
    const apiKey = 'AIzaSyD4b8rV6-kab1mtAuQXup1UTOLdz_ILS3A';
    const endpoint = `https://sheets.googleapis.com/v4/spreadsheets/${sheetID}/values/Sheet1?key=${apiKey}`;
    const productList = document.getElementById('product-list');
    const cartItems = document.getElementById('cart-items');
    const cartCount = document.getElementById('cart-count');
    const orderData = document.getElementById('order-data');
    let cart = [];

    fetch(endpoint)
      .then(res => res.json())
      .then(data => {
        const rows = data.values.slice(1); // Skip headers
        rows.forEach(([name, price, image]) => {
          const col = document.createElement('div');
          col.className = 'col-md-4';
          col.innerHTML = `
            <div class="product-card text-center">
              <img src="${image}" class="img-fluid" style="max-height:200px; object-fit:cover;"/>
              <h5 class="mt-2">${name}</h5>
              <p>â‚¹${price}</p>
              <button class="btn btn-outline-primary" onclick='addToCart("${name}", ${price})'>Add to Cart</button>
            </div>
          `;
          productList.appendChild(col);
        });
      });

    function addToCart(name, price) {
      cart.push({ name, price });
      updateCart();
    }

    function updateCart() {
      cartItems.innerHTML = '';
      cart.forEach(item => {
        const li = document.createElement('li');
        li.textContent = `${item.name} - â‚¹${item.price}`;
        cartItems.appendChild(li);
      });
      cartCount.textContent = cart.length;
      orderData.value = cart.map(i => `${i.name} - â‚¹${i.price}`).join(', ');
    }
  </script>
</body>
</html>
